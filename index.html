<?php
/* Template Name: Page Loader + Game (Eitaa MiniApp) */
?><!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#121621;
  font-family: Vazir, sans-serif;
}

.loader-wrapper{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:#121621;
  text-align:center;
  padding:20px;
  z-index:1000;
}

.background-particles{
  position:absolute;
  inset:0;
  background-image:radial-gradient(circle, #ff6a00 1px, transparent 1px);
  background-size:20px 20px;
  animation:moveBg 12s linear infinite;
  opacity:.25;
  z-index:1;
}

@keyframes moveBg{
  0%{transform:translate(0,0)}
  50%{transform:translate(-50%,-50%)}
  100%{transform:translate(0,0)}
}

.loader-title{
  color:#00bfff;
  font-size:22px;
  line-height:1.9;
  margin-bottom:24px;
  text-shadow:0 0 10px #2760fe;
  z-index:2;
}

.glow-loader{
  width:120px;
  height:120px;
  border-radius:50%;
  background:linear-gradient(45deg,#2760fe,#2f71ff);
  display:flex;
  align-items:center;
  justify-content:center;
  animation:glow 2s ease-in-out infinite;
  z-index:2;
}

.glow-loader span{
  color:#00bfff;
  font-size:15px;
  font-weight:bold;
}

@keyframes glow{
  0%{box-shadow:0 0 5px #2760fe}
  50%{box-shadow:0 0 25px #2f71ff}
  100%{box-shadow:0 0 5px #2760fe}
}

#game-container{
  display:none;
  width:100%;
  height:100vh;
}

#game-container iframe{
  width:100%;
  height:100vh;
  border:none;
}

#rotate-hint{
  position:fixed;
  inset:0;
  background:#121621;
  color:#00bfff;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  font-size:20px;
  padding:20px;
  z-index:99999;
}

@media screen and (orientation: landscape){
  #rotate-hint{
    display:none;
  }
}

@media(max-width:600px){
  .loader-title{font-size:17px}
  .glow-loader{width:100px;height:100px}
  .glow-loader span{font-size:13px}
}
</style>
</head>

<body>

<div class="loader-wrapper" id="loader">
  <div class="background-particles"></div>

  <h1 class="loader-title">
    Ø¢Ú˜Ø§Ù†Ø³ Ø®Ù„Ø§Ù‚ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯Ø§Øª Ø¢ÛŒ Ø¢Ø±<br>
    Ù¾Ù„ØªÙØ±Ù… Ø¬Ø§Ù…Ø¹ Ø®Ø¯Ù…Ø§Øª Ø¯ÛŒØ¬ÛŒØªØ§Ù„
  </h1>

  <div class="glow-loader">
    <span>Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯Ø§Øª Ø¢ÛŒ Ø¢Ø±</span>
  </div>
</div>

<div id="rotate-hint">
  ğŸ“± Ù„Ø·ÙØ§Ù‹ Ú¯ÙˆØ´ÛŒ Ø±Ø§ Ø§ÙÙ‚ÛŒ Ú©Ù†ÛŒØ¯
</div>

<!-- Ú¯ÛŒÙ… -->
<div id="game-container">
  <iframe
    id="game-frame"
    src=""
    allowfullscreen
    scrolling="no">
  </iframe>
</div>

<script>
function checkOrientation() {
  const hint = document.getElementById("rotate-hint");
  if (window.matchMedia("(orientation: landscape)").matches) {
    hint.style.display = "none";
  } else {
    hint.style.display = "flex";
  }
}

// Ø¨Ø¹Ø¯ Ø§Ø² Ø§ÙˆÙ„ÛŒÙ† Ù„Ù…Ø³ Ú©Ø§Ø±Ø¨Ø± (Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„)
document.addEventListener("touchstart", function() {
  if (window.Eitaa && Eitaa.WebApp) {
    Eitaa.WebApp.requestFullscreen(); // ÙÙˆÙ„â€ŒØ§Ø³Ú©Ø±ÛŒÙ† Ø§ÛŒØªØ§
  }
}, { once: true });

document.addEventListener("click", function() {
  if (window.Eitaa && Eitaa.WebApp) {
    Eitaa.WebApp.requestFullscreen(); // ÙÙˆÙ„â€ŒØ§Ø³Ú©Ø±ÛŒÙ† Ø§ÛŒØªØ§
  }
}, { once: true });

// ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§ Ú†Ø±Ø®Ø´ Ú¯ÙˆØ´ÛŒ
window.addEventListener("orientationchange", checkOrientation);
window.addEventListener("resize", checkOrientation);

setTimeout(function () {
  document.getElementById('loader').style.display = 'none';

  document.getElementById('game-frame').src =
    "https://www.madkidgames.com/full/jungle-hill-climb-racing";

  document.getElementById('game-container').style.display = 'block';

  // ÙÙˆÙ„â€ŒØ§Ø³Ú©Ø±ÛŒÙ† Ø§ÛŒØªØ§ Ø¨Ø¹Ø¯ Ø§Ø² Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§Ø²ÛŒ
  if (window.Eitaa && Eitaa.WebApp) {
    Eitaa.WebApp.requestFullscreen();
  }

  checkOrientation();
}, 8500);
</script>

</body>
</html>
